var KTimeDelivery={clearInput:function(e){e&&BX.adjust(e,{props:{autocomplete:"off"}})},createModalTable:function(e,t){var a,r,s,l=BX("kt_wrp_modal");l?BX.addClass(l,"open"):((e=e.UF_SETTING)&&(s=KTimeDelivery.createShedule(e,t),e.title&&(a=BX.create("h4",{props:{className:"kt_wrp_modal_title"},text:e.title})),e.desc&&(r=BX.create("div",{props:{className:"kt_wrp_modal_desc"},text:e.desc}))),l=BX.create("div",{props:{id:"kt_wrp_modal",className:"kt_wrp_modal open"},children:[BX.create("div",{props:{className:"kt_modal_content"},children:[a,BX.create("a",{props:{className:"kt_modal_close"},html:"&times;",events:{click:function(){BX.removeClass(l,"open")}}}),s,r]})]}),BX.insertAfter(l,BX.lastChild(document.body)))},createShedule:function(l,i){if(l.times&&Array.isArray(l.times)){let t=BX.create("div",{props:{className:"kt_table"}});for(let e=1;e<=l.day;e++){var a=e-1,r=new Date,o=new Date,c="",c=0==a?BX.date.format("today",r):(r.setDate(r.getDate()+a),BX.date.format("l",r)),n=BX.date.format("d.m.Y",r);let s=BX.create("div",{props:{className:"kt_table_col"},children:[BX.create("div",{props:{className:"kt_table_title"},html:"<div>"+c+"</div><small>"+n+"</small>"})]});var d=Object.assign(r);l.times.forEach(function(e,t){var a=e.from.split(":"),r="";2==a.length&&(d.setHours(a[0]),d.setMinutes(a[1]),0<Number(l.block_time)&&d.setMinutes(d.getMinutes()-Number(l.block_time)),o.getTime()>=d.getTime()&&(r="block")),s.appendChild(BX.create("div",{text:e.from+" - "+e.to,props:{className:"kt_table_row "+r},dataset:{date:e.from+" - "+e.to+", "+n},events:{click:function(){BX.hasClass(this,"block")||(i.value=this.dataset.date,BX.removeClass(BX("kt_wrp_modal"),"open"))}}}))}),t.appendChild(s)}return t}}};BX.ready(function(){var e,t=BX.message("k_time_setting"),a=BX("bx-soa-properties");for(e in t){var r=t[e],s="ORDER_PROP_"+e;BX.bindDelegate(a,"click",{attribute:{name:s}},function(e){KTimeDelivery.createModalTable(r,this)}),BX.bindDelegate(a,"keydown",{attribute:{name:s}},function(e){return e.preventDefault(),!1}),BX.bindDelegate(a,"mouseover",{attribute:{name:s}},function(e){KTimeDelivery.clearInput(this)})}});